<!--pages/patient-bind/patient-bind.wxml-->
<view class="container">
  <view class="header">
    <text class="title">患者绑定</text>
    <text class="subtitle">请填写您的信息</text>
  </view>

  <view class="form">
    <view class="form-group">
      <text class="form-label">名字 *</text>
      <input 
        class="form-input" 
        type="text" 
        placeholder="请输入名字"
        value="{{formData.fname}}"
        data-field="fname"
        bindinput="onInput"
      />
      <text class="error-text" wx:if="{{errors.fname}}">{{errors.fname}}</text>
    </view>

    <view class="form-group">
      <text class="form-label">姓氏 *</text>
      <input 
        class="form-input" 
        type="text" 
        placeholder="请输入姓氏"
        value="{{formData.lname}}"
        data-field="lname"
        bindinput="onInput"
      />
      <text class="error-text" wx:if="{{errors.lname}}">{{errors.lname}}</text>
    </view>

    <view class="form-group">
      <text class="form-label">出生日期 *</text>
      <picker 
        mode="date" 
        value="{{formData.DOB}}" 
        bindchange="onDateChange"
        start="1900-01-01"
        end="{{today}}"
      >
        <view class="form-input picker-input">
          {{formData.DOB || '请选择出生日期'}}
        </view>
      </picker>
      <text class="error-text" wx:if="{{errors.DOB}}">{{errors.DOB}}</text>
    </view>

    <view class="form-group">
      <text class="form-label">性别 *</text>
      <picker 
        mode="selector" 
        range="{{sexOptions}}" 
        value="{{sexIndex}}"
        bindchange="onSexChange"
      >
        <view class="form-input picker-input">
          {{formData.sex || '请选择性别'}}
        </view>
      </picker>
      <text class="error-text" wx:if="{{errors.sex}}">{{errors.sex}}</text>
    </view>

    <view class="form-group">
      <text class="form-label">手机号 *</text>
      <input 
        class="form-input" 
        type="number" 
        placeholder="请输入手机号"
        value="{{formData.phone}}"
        data-field="phone"
        bindinput="onInput"
      />
      <text class="error-text" wx:if="{{errors.phone}}">{{errors.phone}}</text>
    </view>

    <view class="form-group">
      <text class="form-label">邮箱</text>
      <input 
        class="form-input" 
        type="text" 
        placeholder="请输入邮箱（可选）"
        value="{{formData.email}}"
        data-field="email"
        bindinput="onInput"
      />
    </view>

    <view class="submit-btn btn-primary" bindtap="submit">
      <text>提交绑定</text>
    </view>
  </view>
</view>
